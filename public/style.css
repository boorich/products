:root {
    --bg: #0b0e14;
    --panel: #101624;
    --text: #e6e9f2;
    --muted: #9aa3b2;
    --line: rgba(230, 233, 242, 0.18);
    --warn: #ffcc66;
    --bad: #ff667a;
  }
  
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    background: var(--bg);
    color: var(--text);
  }
  
  header {
    padding: 14px 16px;
    border-bottom: 1px solid var(--line);
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .title { font-weight: 700; letter-spacing: 0.2px; }
  .subtitle { color: var(--muted); font-size: 13px; flex: 1; }
  .toolbar button {
    background: transparent;
    border: 1px solid var(--line);
    color: var(--text);
    padding: 8px 10px;
    border-radius: 10px;
    cursor: pointer;
  }
  .toolbar button:hover { border-color: rgba(230,233,242,0.35); }
  .templateBtn:hover { opacity: 0.9; transform: translateY(-1px); }
  .templateBtn:active { transform: translateY(0); }
  
  input, textarea, select {
    font-family: inherit;
  }
  input:focus, textarea:focus, select:focus {
    outline: 1px solid rgba(102, 204, 255, 0.5);
    outline-offset: -1px;
  }
  
  main {
    display: grid;
    grid-template-columns: 1fr 420px;
    min-height: calc(100vh - 110px);
  }
  
  #graph { position: relative; }
  #panel {
    border-left: 1px solid var(--line);
    background: var(--panel);
    padding: 14px 14px 18px 14px;
    overflow: auto;
  }
  
  #routineDaily, #routineWeekly, #routineHistory {
    margin-bottom: 12px;
  }
  
  .panelEmpty .hint { font-weight: 700; margin-bottom: 6px; }
  .panelEmpty .mini { color: var(--muted); font-size: 13px; }
  
  .hidden { display: none; }
  
  .panelErrors {
    margin-top: 12px;
    padding: 10px;
    border: 1px solid rgba(255, 102, 122, 0.45);
    border-radius: 12px;
    color: var(--bad);
    background: rgba(255, 102, 122, 0.06);
    font-size: 13px;
    line-height: 1.35;
  }
  
  h2 { margin: 0 0 10px 0; font-size: 18px; }
  h3 { margin: 14px 0 6px 0; font-size: 14px; color: var(--muted); letter-spacing: 0.2px; }
  p, li { font-size: 13px; line-height: 1.45; color: var(--text); }
  ul { margin: 8px 0 0 18px; padding: 0; }
  
  .kv { display: grid; grid-template-columns: 140px 1fr; gap: 8px; font-size: 13px; }
  .k { color: var(--muted); }
  .v { color: var(--text); }
  
  .badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 999px;
    font-size: 12px;
    border: 1px solid var(--line);
    margin-right: 8px;
  }
  .badge.cpd { border-color: rgba(102, 204, 255, 0.55); }
  .badge.ccd { border-color: rgba(153, 255, 153, 0.55); }
  
  footer {
    padding: 10px 16px;
    border-top: 1px solid var(--line);
    color: var(--muted);
    font-size: 12px;
  }
  .legend { display: flex; gap: 10px; align-items: center; }
  .edge { padding: 2px 6px; border: 1px solid var(--line); border-radius: 999px; }
  .edge.uses { border-color: rgba(230,233,242,0.18); }
  .edge.inspired { border-color: rgba(153,255,153,0.35); }

  .statusNone { color: rgba(255, 102, 122, 0.95); } /* rot: existiert bewusst nicht */
  .statusTbd { color: rgba(255, 204, 102, 0.95); }  /* gelb: offen */
  .statusNa { color: rgba(154, 163, 178, 0.95); }   /* muted */
  .statusExplanation {
    font-size: 12px;
    line-height: 1.6;
    color: var(--text);
    margin-bottom: 14px;
    margin-top: 4px;
    padding: 12px 14px 12px 32px;
    background: rgba(102, 204, 255, 0.08);
    border-left: 3px solid rgba(102, 204, 255, 0.4);
    border-radius: 6px;
    position: relative;
  }
  .statusExplanation::before {
    content: "â„¹";
    position: absolute;
    left: 14px;
    top: 12px;
    font-size: 14px;
    color: rgba(102, 204, 255, 0.7);
    font-weight: 600;
  }
  .statusExplanation strong {
    color: var(--warn);
    font-weight: 600;
  }
  .systemBanner {
    border-bottom: 1px solid var(--line);
    padding: 10px 16px;
    background: rgba(255,255,255,0.02);
  }
  .systemTitle { font-weight: 800; margin-bottom: 4px; }
  .systemText { color: var(--muted); font-size: 13px; line-height: 1.35; }

  /* Markdown Editor Modal */
  .markdown-editor {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
  }
  .markdown-editor-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(4px);
  }
  .markdown-editor-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90vw;
    max-width: 1200px;
    height: 85vh;
    max-height: 800px;
    background: var(--panel);
    border: 1px solid var(--line);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  }
  .markdown-editor-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--line);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .markdown-editor-body {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    overflow: hidden;
  }
  .markdown-editor-pane {
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--line);
    overflow: hidden;
  }
  .markdown-editor-pane:last-child {
    border-right: none;
  }
  .markdown-editor-footer {
    padding: 12px 20px;
    border-top: 1px solid var(--line);
    display: flex;
    align-items: center;
  }
  #markdownPreview h1, #markdownPreview h2, #markdownPreview h3 {
    margin-top: 16px;
    margin-bottom: 8px;
    color: var(--text);
  }
  #markdownPreview h1 { font-size: 24px; }
  #markdownPreview h2 { font-size: 20px; }
  #markdownPreview h3 { font-size: 16px; }
  #markdownPreview p { margin: 8px 0; }
  #markdownPreview ul, #markdownPreview ol { margin: 8px 0; padding-left: 24px; }
  #markdownPreview li { margin: 4px 0; }
  #markdownPreview code {
    background: rgba(255, 255, 255, 0.1);
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 12px;
  }
  #markdownPreview pre {
    background: rgba(255, 255, 255, 0.05);
    padding: 12px;
    border-radius: 6px;
    overflow-x: auto;
    margin: 12px 0;
  }
  #markdownPreview pre code {
    background: none;
    padding: 0;
  }
  #markdownPreview strong { font-weight: 600; }
  #markdownPreview em { font-style: italic; }
  #markdownPreview hr {
    border: none;
    border-top: 1px solid var(--line);
    margin: 16px 0;
  }

  